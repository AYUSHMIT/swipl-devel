<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<HTML>
<HEAD>
<TITLE>SWI-Prolog 5.6.17 Reference Manual: Section A.9</TITLE><LINK REL=home HREF="index.html">
<LINK REL=contents HREF="Contents.html">
<LINK REL=index HREF="DocIndex.html">
<LINK REL=previous HREF="debug.html">
<LINK REL=next HREF="netscape.html">
<style type="text/css"> 
dd.defbody 
{ margin-bottom: 1em; 
}

dt.pubdef 
{ background-color: #c5e1ff; 
}

pre.code 
{ margin-left: 1.5em; 
margin-right: 1.5em; 
border: 1px dotted; 
padding-top: 5px; 
padding-left: 5px; 
padding-bottom: 5px; 
background-color: #f8f8f8; 
}

div.navigate
{ text-align: center; 
background-color: #f0f0f0; 
border: 1px dotted; 
padding: 5px;
}
</style>
</HEAD>
<BODY BGCOLOR="white"><DIV class="navigate"><A HREF="index.html"><IMG SRC="home.gif" BORDER=0 ALT="Home"></A>
<A HREF="Contents.html"><IMG SRC="index.gif" BORDER=0 ALT="Contents"></A>
<A HREF="DocIndex.html"><IMG SRC="yellow_pages.gif" BORDER=0 ALT="Index"></A>
<A HREF="debug.html"><IMG SRC="prev.gif" BORDER=0 ALT="Previous"></A>
<A HREF="netscape.html"><IMG SRC="next.gif" BORDER=0 ALT="Next"></A>
</DIV>

<H2><A NAME="sec:A.9">A.9 library( readutil ): Reading lines, streams 
and files</A></H2>

<A NAME="readutil"></A>

<P>This library contains primitives to read lines, files, multiple 
terms, etc. The package <CODE>clib</CODE> provides a shared object (DLL) 
named <CODE>readutil</CODE>. If the library can locate this shared 
object it will use the foreign implementation for reading character 
codes. Otherwise it will use a Prolog implementation. Distributed 
applications should make sure to deliver the <CODE>readutil</CODE> 
shared object if performance of these predicates is critical.

<DL>
<DT class="pubdef"><A NAME="read_line_to_codes/2"><STRONG>read_line_to_codes</STRONG>(<VAR>+Stream, 
-Codes</VAR>)</A></DT>
<DD class="defbody">
Read the next line of input from <VAR>Stream</VAR> and unify the result 
with
<VAR>Codes</VAR> <EM>after</EM> the line has been read. A line is ended 
by a newline character or end-of-file. Unlike <A NAME="idx:readlinetocodes3:1376"></A><A HREF="readutil.html#read_line_to_codes/3">read_line_to_codes/3</A>, 
this predicate removes trailing newline character.

<P>On end-of-file the atom <CODE>end_of_file</CODE> is returned. See 
also
<A NAME="idx:atendofstream01:1377"></A><A HREF="chario.html#at_end_of_stream/0">at_end_of_stream/[0,1]</A>.</DD>
<DT class="pubdef"><A NAME="read_line_to_codes/3"><STRONG>read_line_to_codes</STRONG>(<VAR>+Stream, 
-Codes, ?Tail</VAR>)</A></DT>
<DD class="defbody">
Diference-list version to read an input line to a list of character 
codes. Reading stops at the newline or end-of-file character, but unlike <A NAME="idx:readlinetocodes2:1378"></A><A HREF="readutil.html#read_line_to_codes/2">read_line_to_codes/2</A>, 
the newline is retained in the output. This predicate is especially 
useful for readine a block of lines upto some delimiter. The following 
example reads an HTTP header ended by a blank line:

<PRE class="code">
read_header_data(Stream, Header) :-
        read_line_to_codes(Stream, Header, Tail),
        read_header_data(Header, Stream, Tail).

read_header_data("\r\n", _, _) :- !.
read_header_data("\n", _, _) :- !.
read_header_data("", _, _) :- !.
read_header_data(_, Stream, Tail) :-
        read_line_to_codes(Stream, Tail, NewTail),
        read_header_data(Tail, Stream, NewTail).
</PRE>

</DD>
<DT class="pubdef"><A NAME="read_stream_to_codes/2"><STRONG>read_stream_to_codes</STRONG>(<VAR>+Stream, 
-Codes</VAR>)</A></DT>
<DD class="defbody">
Read all input until end-of-file and unify the result to <VAR>Codes</VAR>.</DD>
<DT class="pubdef"><A NAME="read_stream_to_codes/3"><STRONG>read_stream_to_codes</STRONG>(<VAR>+Stream, 
-Codes, ?Tail</VAR>)</A></DT>
<DD class="defbody">
Difference-list version of <A NAME="idx:readstreamtocodes2:1379"></A><A HREF="readutil.html#read_stream_to_codes/2">read_stream_to_codes/2</A>.</DD>
<DT class="pubdef"><A NAME="read_file_to_codes/3"><STRONG>read_file_to_codes</STRONG>(<VAR>+Spec, 
-Codes, +Options</VAR>)</A></DT>
<DD class="defbody">
Read a file to a list of character codes. <VAR>Spec</VAR> is a 
file-specification for <A NAME="idx:absolutefilename3:1380"></A><A HREF="files.html#absolute_file_name/3">absolute_file_name/3</A>. <VAR>Codes</VAR> 
is the resulting code-list. <VAR>Options</VAR> is a list of options for
<A NAME="idx:absolutefilename3:1381"></A><A HREF="files.html#absolute_file_name/3">absolute_file_name/3</A> 
and <A NAME="idx:open4:1382"></A><A HREF="IO.html#open/4">open/4</A>. In 
addition, the option
<CODE>tail(Tail)</CODE> is defined, forming a difference-list.</DD>
<DT class="pubdef"><A NAME="read_file_to_terms/3"><STRONG>read_file_to_terms</STRONG>(<VAR>+Spec, 
-Terms, +Options</VAR>)</A></DT>
<DD class="defbody">
Read a file to a list of prolog terms (see <A NAME="idx:read1:1383"></A><A HREF="termrw.html#read/1">read/1</A>). <VAR>Spec</VAR> 
is a file-specification for <A NAME="idx:absolutefilename3:1384"></A><A HREF="files.html#absolute_file_name/3">absolute_file_name/3</A>. <VAR>Terms</VAR> 
is the resulting list of Prolog terms. <VAR>Options</VAR> is a list of 
options for
<A NAME="idx:absolutefilename3:1385"></A><A HREF="files.html#absolute_file_name/3">absolute_file_name/3</A> 
and <A NAME="idx:open4:1386"></A><A HREF="IO.html#open/4">open/4</A>. In 
addition, the option
<CODE>tail(Tail)</CODE> is defined, forming a difference-list.
</DD>
</DL>

<P></BODY></HTML>