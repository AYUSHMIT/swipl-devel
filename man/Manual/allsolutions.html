<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<HTML>
<HEAD>
<TITLE>SWI-Prolog 5.6.17 Reference Manual: Section 4.29</TITLE><LINK REL=home HREF="index.html">
<LINK REL=contents HREF="Contents.html">
<LINK REL=index HREF="DocIndex.html">
<LINK REL=previous HREF="builtinlist.html">
<LINK REL=next HREF="applylist.html">
<style type="text/css"> 
dd.defbody 
{ margin-bottom: 1em; 
}

dt.pubdef 
{ background-color: #c5e1ff; 
}

pre.code 
{ margin-left: 1.5em; 
margin-right: 1.5em; 
border: 1px dotted; 
padding-top: 5px; 
padding-left: 5px; 
padding-bottom: 5px; 
background-color: #f8f8f8; 
}

div.navigate
{ text-align: center; 
background-color: #f0f0f0; 
border: 1px dotted; 
padding: 5px;
}
</style>
</HEAD>
<BODY BGCOLOR="white"><DIV class="navigate"><A HREF="index.html"><IMG SRC="home.gif" BORDER=0 ALT="Home"></A>
<A HREF="Contents.html"><IMG SRC="index.gif" BORDER=0 ALT="Contents"></A>
<A HREF="DocIndex.html"><IMG SRC="yellow_pages.gif" BORDER=0 ALT="Index"></A>
<A HREF="builtinlist.html"><IMG SRC="prev.gif" BORDER=0 ALT="Previous"></A>
<A HREF="applylist.html"><IMG SRC="next.gif" BORDER=0 ALT="Next"></A>
</DIV>

<H2><A NAME="sec:4.29">4.29 Finding all Solutions to a Goal</A></H2>

<A NAME="sec:allsolutions"></A>

<DL>
<DT class="pubdef"><A NAME="findall/3"><STRONG>findall</STRONG>(<VAR>+Template, 
+Goal, -Bag</VAR>)</A></DT>
<DD class="defbody">
Creates a list of the instantiations <VAR>Template</VAR> gets 
successively on backtracking over <VAR>Goal</VAR> and unifies the result 
with <VAR>Bag</VAR>. Succeeds with an empty list if <VAR>Goal</VAR> has 
no solutions. <A NAME="idx:findall3:906"></A><A HREF="allsolutions.html#findall/3">findall/3</A> 
is equivalent to <A NAME="idx:bagof3:907"></A><A HREF="allsolutions.html#bagof/3">bagof/3</A> 
with all free variables bound with the existential operator (<STRONG><CODE>^</CODE></STRONG>), 
except that <A NAME="idx:bagof3:908"></A><A HREF="allsolutions.html#bagof/3">bagof/3</A> 
fails when goal has no solutions.</DD>
<DT class="pubdef"><A NAME="bagof/3"><STRONG>bagof</STRONG>(<VAR>+Template, 
+Goal, -Bag</VAR>)</A></DT>
<DD class="defbody">
Unify <VAR>Bag</VAR> with the alternatives of <VAR>Template</VAR>, if <VAR>Goal</VAR> 
has free variables besides the one sharing with <VAR>Template</VAR> 
bagof will backtrack over the alternatives of these free variables, 
unifying <VAR>Bag</VAR> with the corresponding alternatives of <VAR>Template</VAR>. 
The construct
<CODE>+<VAR>Var</VAR><CODE>^</CODE><VAR>Goal</VAR></CODE> tells bagof 
not to bind <VAR>Var</VAR> in
<VAR>Goal</VAR>. <A NAME="idx:bagof3:909"></A><A HREF="allsolutions.html#bagof/3">bagof/3</A> 
fails if <VAR>Goal</VAR> has no solutions.

<P>The example below illustrates <A NAME="idx:bagof3:910"></A><A HREF="allsolutions.html#bagof/3">bagof/3</A> 
and the <STRONG><CODE>^</CODE></STRONG> operator. The variable bindings 
are printed together on one line to save paper.

<PRE class="code">
2 ?- listing(foo).

foo(a, b, c).
foo(a, b, d).
foo(b, c, e).
foo(b, c, f).
foo(c, c, g).

Yes
3 ?- bagof(C, foo(A, B, C), Cs).

A = a, B = b, C = G308, Cs = [c, d] ;
A = b, B = c, C = G308, Cs = [e, f] ;
A = c, B = c, C = G308, Cs = [g] ;

No
4 ?- bagof(C, A^foo(A, B, C), Cs).

A = G324, B = b, C = G326, Cs = [c, d] ;
A = G324, B = c, C = G326, Cs = [e, f, g] ;

No
5 ?-
</PRE>

</DD>
<DT class="pubdef"><A NAME="setof/3"><STRONG>setof</STRONG>(<VAR>+Template, 
+Goal, -Set</VAR>)</A></DT>
<DD class="defbody">
Equivalent to <A NAME="idx:bagof3:911"></A><A HREF="allsolutions.html#bagof/3">bagof/3</A>, 
but sorts the result using <A NAME="idx:sort2:912"></A><A HREF="builtinlist.html#sort/2">sort/2</A> 
to get a sorted list of alternatives without duplicates.
</DD>
</DL>

<P></BODY></HTML>